<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>arXiv Paper Feed</title>
    <link rel="stylesheet" href="assets/style.css" />
    <style>
      .arxiv-header { display: flex; flex-wrap: wrap; gap: 24px; align-items: baseline; justify-content: space-between; margin-bottom: 24px; padding: 16px; border: 1px solid var(--border); border-radius: var(--radius); background: rgba(255, 255, 255, 0.02); }
      .arxiv-meta { display: flex; gap: 20px; align-items: center; flex-wrap: wrap; }
      .meta-item { display: flex; gap: 6px; align-items: center; font-size: 15px; }
      .meta-label { color: var(--muted); font-weight: 500; }
      .meta-value { color: var(--text); font-weight: 600; }
      .papers-grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
      .paper-card { border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; background: rgba(255, 255, 255, 0.02); transition: all 0.2s ease; }
      .paper-card:hover { border-color: rgba(122, 162, 255, 0.4); background: rgba(255, 255, 255, 0.04); box-shadow: 0 4px 16px rgba(122, 162, 255, 0.1); }
      .paper-title { margin: 0 0 12px; font-size: 18px; font-weight: 600; color: var(--text); line-height: 1.4; }
      .paper-authors { margin: 0 0 12px; font-size: 14px; color: var(--muted); line-height: 1.5; }
      .paper-authors strong { color: var(--text); }
      .paper-abstract { margin: 0 0 14px; font-size: 15px; color: var(--muted); line-height: 1.6; max-height: 100px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; }
      .paper-meta { display: flex; gap: 14px; flex-wrap: wrap; font-size: 13px; margin-bottom: 14px; padding-bottom: 14px; border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
      .paper-meta-item { color: var(--muted); }
      .paper-links { display: flex; gap: 10px; flex-wrap: wrap; }
      .paper-link { display: inline-flex; align-items: center; gap: 6px; padding: 8px 12px; border: 1px solid var(--link); border-radius: 8px; color: var(--link); font-size: 14px; font-weight: 500; transition: all 0.2s ease; text-decoration: none; }
      .paper-link:hover { background: rgba(122, 162, 255, 0.1); border-color: rgba(122, 162, 255, 0.8); }
      .loading { text-align: center; padding: 40px 20px; color: var(--muted); }
      .spinner { display: inline-block; width: 32px; height: 32px; border: 3px solid rgba(122, 162, 255, 0.2); border-top-color: var(--link); border-radius: 50%; animation: spin 0.8s linear infinite; margin-bottom: 16px; }
      @keyframes spin { to { transform: rotate(360deg); } }
      .error { padding: 20px; border: 1px solid #d32f2f; border-radius: var(--radius); background: rgba(211, 47, 47, 0.1); color: #ff6b6b; margin: 20px 0; }
      .no-results { padding: 40px 20px; text-align: center; color: var(--muted); }
      @media (max-width: 640px) { .arxiv-header { gap: 16px; flex-direction: column; align-items: flex-start; } .paper-title { font-size: 16px; } .paper-links { flex-direction: column; } .paper-link { width: 100%; justify-content: center; } }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-row">
        <a class="brand" href="./">Junhao's Coding Blog</a>
        <nav class="nav">
          <a href="./">Home</a>
          <a href="./pacman.html">Pac-Man ðŸ’˜</a>
          <a href="./arxiv.html">arXiv Feed</a>
          <a href="#posts">Posts</a>
          <a href="#about">About</a>
        </nav>
      </div>
    </header>
    <main class="container">
      <section class="hero">
        <h1>arXiv Paper Feed</h1>
        <p>Latest papers on large language models, RAG, and biostatistics/medical applications. Automatically refreshed daily.</p>
      </section>
      <div id="content">
        <div class="loading">
          <div class="spinner"></div>
          <p>Loading papers...</p>
        </div>
      </div>
    </main>
    <script>
      async function loadArxivPapers() {
        const contentDiv = document.getElementById('content');
        try {
          const timestamp = Math.floor(Date.now() / 60000);
          const response = await fetch(`assets/arxiv.json?t=${timestamp}`);
          if (!response.ok) throw new Error(`Failed to fetch: ${response.status}`);
          const data = await response.json();
          const generatedDate = new Date(data.generated_at_utc);
          const formattedTime = generatedDate.toLocaleString('en-US', {year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', timeZone: 'UTC'});
          let html = `<div class="arxiv-header"><div class="arxiv-meta"><div class="meta-item"><span class="meta-label">Papers found:</span><span class="meta-value">${data.count || 0}</span></div><div class="meta-item"><span class="meta-label">Generated:</span><span class="meta-value">${formattedTime} UTC</span></div></div></div><div class="papers-grid">`;
          if (data.papers && data.papers.length > 0) {
            data.papers.forEach((paper) => {
              const authors = paper.authors && paper.authors.length > 0 ? `<strong>${escapeHtml(paper.authors[0])}</strong>${paper.authors.length > 1 ? ' et al.' : ''}` : 'Unknown';
              const pubDate = paper.published ? new Date(paper.published).toLocaleDateString('en-US', {year: 'numeric', month: 'short', day: 'numeric'}) : 'Unknown';
              const categories = paper.categories && paper.categories.length > 0 ? escapeHtml(paper.categories.join(', ')) : 'Uncategorized';
              html += `<div class="paper-card"><h3 class="paper-title">${escapeHtml(paper.title)}</h3><div class="paper-authors">${authors}</div><div class="paper-abstract">${escapeHtml(paper.abstract || '')}</div><div class="paper-meta"><div class="paper-meta-item"><strong>Categories:</strong> ${categories}</div><div class="paper-meta-item"><strong>Published:</strong> ${pubDate}</div></div><div class="paper-links">${paper.arxiv_url ? `<a class="paper-link" href="${escapeHtml(paper.arxiv_url)}" target="_blank" rel="noopener">arXiv â†’</a>` : ''}${paper.pdf_url ? `<a class="paper-link" href="${escapeHtml(paper.pdf_url)}" target="_blank" rel="noopener">PDF â†’</a>` : ''}</div></div>`;
            });
          } else {
            html += '<div class="no-results">No papers found.</div>';
          }
          html += '</div>';
          contentDiv.innerHTML = html;
        } catch (error) {
          console.error('Error:', error);
          contentDiv.innerHTML = `<div class="error"><strong>Error loading papers:</strong> ${escapeHtml(error.message)}</div>`;
        }
      }
      function escapeHtml(text) {
        const map = {'&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;'};
        return String(text).replace(/[&<>"\']/g, (m) => map[m]);
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadArxivPapers);
      } else {
        loadArxivPapers();
      }
    </script>
  </body>
</html>
